apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'eclipse'

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

mainClassName = 'org.asamk.signal.Main'

version = '0.6.7'

compileJava.options.encoding = 'UTF-8'

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    compile 'com.github.turasa:signal-service-java:2.15.3_unofficial_7'
    compile 'org.bouncycastle:bcprov-jdk15on:1.64'
    compile 'net.sourceforge.argparse4j:argparse4j:0.8.1'
    compile 'com.github.hypfvieh:dbus-java:3.2.0'
    compile 'org.slf4j:slf4j-nop:1.7.30'
}

jar {
    manifest {
        attributes(
                'Implementation-Title': project.name,
                'Implementation-Version': project.version,
                'Main-Class': project.mainClassName,
        )
    }
}

run {
    if (project.hasProperty("appArgs")) {
        // allow passing command-line arguments to the main application e.g.:
        // $ gradle run -PappArgs="['-u', '+...', 'daemon', '--json']"
        args Eval.me(appArgs)
    }
}
